<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[Project] DKT 대회 - EDA | BrotherGyu</title>
<meta name="description" content="Deep Knowledge Tracing Dataset 전처리">


  <meta name="author" content="Brother_Gyu">
  
  <meta property="article:author" content="Brother_Gyu">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="BrotherGyu">
<meta property="og:title" content="[Project] DKT 대회 - EDA">
<meta property="og:url" content="https://brothergyu.github.io/boostcamp_ai/DKT_EDA/">


  <meta property="og:description" content="Deep Knowledge Tracing Dataset 전처리">







  <meta property="article:published_time" content="2023-05-17T00:00:00+09:00">





  

  


<link rel="canonical" href="https://brothergyu.github.io/boostcamp_ai/DKT_EDA/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Brother_Gyu",
      "url": "https://brothergyu.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="BrotherGyu Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="../../assets/logo.ico/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../assets/logo.ico/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../assets/logo.ico/favicon-16x16.png">
<link rel="mask-icon" href="../../assets/logo.ico/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/brother_gyu_logo_image.png" alt="BrotherGyu"></a>
        
        <a class="site-title" href="/">
          BrotherGyu
          <span class="site-subtitle">Devlog_</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/index.html">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tag</a>
            </li><li class="masthead__menu-item">
              <a href="/portfolio/">Portfolio</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#boostcamp_ai" itemprop="item"><span itemprop="name">Boostcamp_ai</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">[Project] DKT 대회 - EDA</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://brothergyu.github.io/">
        <img src="/assets/images/brother_gyu_profile_image.png" alt="Brother_Gyu" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://brothergyu.github.io/" itemprop="url">Brother_Gyu</a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <!-- 팔로우 버튼 제거 -->
    <!-- <button class="btn btn--inverse">팔로우</button> -->
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      <nav class="nav__list">
  <!-- 토글 버튼 제거 -->
  <input id="ac-toc" name="accordion-toc" type="checkbox" checked/>
  <!-- 예전 코드 -->
  <!-- <input id="ac-toc" name="accordion-toc" type="checkbox"/> -->
  <!-- <label for="ac-toc">Toggle menu</label> -->
  <ul class="nav__items" id="category_tag_menu">
    <li>
      <span>Category List</span>
    </li>  
    <li>
        <span class="nav__sub-title">study</span>
            <ul>
                
                    
                
                    
                
                    
                        <li><a href="/categories/BoostCamp_AI" class="">NaverBoostCamp AI [11]</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
              
                  
                      <li><a href="/categories/CleanCode_Python" class="">CleanCode Python [5]</a></li>
                  
              
                  
              
                  
              
                  
              
                  
              
                  
              
                  
              
                  
              
                  
              
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/AI" class="">AI [2]</a></li>
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/Pytorch" class="">Pytorch [3]</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/Ubuntu_Server" class="">Ubuntu Server [7]</a></li>
                    
                
                    
                
            </ul>

        <span class="nav__sub-title">python</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/Python_Module" class="">Python Module [3]</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        <span class="nav__sub-title">etc</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/DevTools" class="">DevTools [9]</a></li>
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                        <li><a href="/categories/TIL" class="">TIL [7]</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/ETC" class="">ETC [1]</a></li>
                    
                
            </ul>
      </li>
  </ul>
</nav>
    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[Project] DKT 대회 - EDA">
    <meta itemprop="description" content="Deep Knowledge Tracing Dataset 전처리">
    <meta itemprop="datePublished" content="2023-05-17T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://brothergyu.github.io/boostcamp_ai/DKT_EDA/" class="u-url" itemprop="url">[Project] DKT 대회 - EDA
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-05-17T00:00:00+09:00">2023-05-17 Wednesday</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-fas fa-list-ul"></i> 목차</h4></header>
              <!-- toc 인식 범위 수정 -->
              <!-- <ul class="toc__menu"><li><a href="#deep-knowledge-tracing-eda">Deep Knowledge Tracing EDA</a><ul><li><a href="#dataset-전처리--ml학습을-위한-전처리">Dataset 전처리 + ML학습을 위한 전처리</a></li><li><a href="#01_-데이터-schema">01_ 데이터 schema</a></li><li><a href="#02_-eda">02_ EDA</a><ul><li><a href="#02_01-create-dataset-create-dataset-dataset-merge--submission-dataset">02_01 Create Dataset [Create Dataset [Dataset Merge / Submission Dataset]</a></li><li><a href="#02_02-시험지-번호-문제-번호-대분류-카테고리-생성">02_02 시험지 번호, 문제 번호, 대분류 카테고리 생성</a></li><li><a href="#02_03-timestamp">02_03 TimeStamp</a></li><li><a href="#02_04-timeelapsed-outlier-처리">02_04 TimeElapsed Outlier 처리</a></li><li><a href="#02_05-timeelapsed-결측치-채우기">02_05 TimeElapsed 결측치 채우기</a></li></ul></li><li><a href="#03_-featureengineering">03_ FeatureEngineering</a><ul><li><a href="#03_01-timestamp">03_01 Timestamp</a></li></ul></li><li><a href="#04_-실패-했던-featureengineering">04_ 실패 했던 FeatureEngineering</a><ul><li><a href="#04_01-_columns_to_mean_score-함수-코드">04_01 _columns_to_mean_score 함수 코드</a></li></ul></li><li><a href="#05_-전처리-완료">05_ 전처리 완료</a></li></ul></li><li><a href="#--회고">- 회고</a></li></ul>
 -->
              <ul class="toc__menu"><li><a href="#deep-knowledge-tracing-eda">Deep Knowledge Tracing EDA</a><ul><li><a href="#dataset-전처리--ml학습을-위한-전처리">Dataset 전처리 + ML학습을 위한 전처리</a></li><li><a href="#01_-데이터-schema">01_ 데이터 schema</a></li><li><a href="#02_-eda">02_ EDA</a><ul><li><a href="#02_01-create-dataset-create-dataset-dataset-merge--submission-dataset">02_01 Create Dataset [Create Dataset [Dataset Merge / Submission Dataset]</a></li><li><a href="#02_02-시험지-번호-문제-번호-대분류-카테고리-생성">02_02 시험지 번호, 문제 번호, 대분류 카테고리 생성</a></li><li><a href="#02_03-timestamp">02_03 TimeStamp</a></li><li><a href="#02_04-timeelapsed-outlier-처리">02_04 TimeElapsed Outlier 처리</a></li><li><a href="#02_05-timeelapsed-결측치-채우기">02_05 TimeElapsed 결측치 채우기</a></li></ul></li><li><a href="#03_-featureengineering">03_ FeatureEngineering</a><ul><li><a href="#03_01-timestamp">03_01 Timestamp</a></li></ul></li><li><a href="#04_-실패-했던-featureengineering">04_ 실패 했던 FeatureEngineering</a><ul><li><a href="#04_01-_columns_to_mean_score-함수-코드">04_01 _columns_to_mean_score 함수 코드</a></li></ul></li><li><a href="#05_-전처리-완료">05_ 전처리 완료</a></li></ul></li><li><a href="#--회고">- 회고</a></li></ul>

            </nav>
          </aside>
        
        <blockquote>
  <p>Week 09 ~ 12 [2023.05.02 ~ 2023.05.25] 동안 진행했던 네이버 커넥트재단 <strong>Deep Knowledge Tracing</strong> 대회를 진행하며 했었던 데이터셋 전처리 과정을 기록합니다.</p>
</blockquote>

<h1 id="deep-knowledge-tracing-eda"><strong>Deep Knowledge Tracing EDA</strong></h1>

<hr />

<h2 id="dataset-전처리--ml학습을-위한-전처리">Dataset 전처리 + ML학습을 위한 전처리</h2>

<blockquote>
  <p>sequence데이터로 학습하기에 ML 알고리즘으로는 어려움이 있다<br />
test데이터가 각각 특정한 유저가 푼 문제와 마지막 풀어야 할 문제로 구성되어 하나로 묶여있는 sequence데이터 형식이다<br />
그대로 사용하면 예측해야 유저가 train에 아예 포함되지 않는 cold start 문제가 발생하여 데이터셋을 별도로 구성해야 한다</p>

  <p>- 목표  [협업을 위한 공통 데이터셋 : 피처를 최대한 다양하게 만들어 필요한 부분을 선택하여 사용하도록 데이터셋 전처리]</p>
</blockquote>

<h2 id="01_-데이터-schema">01_ 데이터 schema</h2>

<ul>
  <li>
    <p>train_data.csv [2266586 rows × 6 columns]</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: right"> </th>
          <th style="text-align: right">userID</th>
          <th style="text-align: left">assessmentItemID</th>
          <th style="text-align: left">testId</th>
          <th style="text-align: right">answerCode</th>
          <th style="text-align: left">Timestamp</th>
          <th style="text-align: right">KnowledgeTag</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: right">0</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****1</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2626</td>
        </tr>
        <tr>
          <td style="text-align: right">1</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****2</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2626</td>
        </tr>
        <tr>
          <td style="text-align: right">2</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****3</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2625</td>
        </tr>
        <tr>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: right">…</td>
        </tr>
        <tr>
          <td style="text-align: right">2266584</td>
          <td style="text-align: right">7441</td>
          <td style="text-align: left">A****1</td>
          <td style="text-align: left">A04***0</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2625</td>
        </tr>
        <tr>
          <td style="text-align: right">2266585</td>
          <td style="text-align: right">7441</td>
          <td style="text-align: left">A****1</td>
          <td style="text-align: left">A04***0</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2623</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>test_data.csv [260114 rows × 6 columns]</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: right"> </th>
          <th style="text-align: right">userID</th>
          <th style="text-align: left">assessmentItemID</th>
          <th style="text-align: left">testId</th>
          <th style="text-align: right">answerCode</th>
          <th style="text-align: left">Timestamp</th>
          <th style="text-align: right">KnowledgeTag</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: right">0</td>
          <td style="text-align: right">3</td>
          <td style="text-align: left">A****1</td>
          <td style="text-align: left">A05***3</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2626</td>
        </tr>
        <tr>
          <td style="text-align: right">1</td>
          <td style="text-align: right">3</td>
          <td style="text-align: left">A****2</td>
          <td style="text-align: left">A05***3</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2626</td>
        </tr>
        <tr>
          <td style="text-align: right">2</td>
          <td style="text-align: right">3</td>
          <td style="text-align: left">A****3</td>
          <td style="text-align: left">A05***3</td>
          <td style="text-align: right">-1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">2625</td>
        </tr>
        <tr>
          <td style="text-align: right"> </td>
          <td style="text-align: right">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: right">…</td>
        </tr>
        <tr>
          <td style="text-align: right">260112</td>
          <td style="text-align: right">7439</td>
          <td style="text-align: left">A****6</td>
          <td style="text-align: left">A04***0</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">8244</td>
        </tr>
        <tr>
          <td style="text-align: right">260113</td>
          <td style="text-align: right">7439</td>
          <td style="text-align: left">A****7</td>
          <td style="text-align: left">A04***0</td>
          <td style="text-align: right">-1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">8832</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h2 id="02_-eda">02_ EDA</h2>

<h3 id="02_01-create-dataset-create-dataset-dataset-merge--submission-dataset">02_01 Create Dataset [Create Dataset [Dataset Merge / Submission Dataset]</h3>

<hr />

<ul>
  <li>
    <p>train_data와 test_data 결합</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_test_dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">concat</span><span class="p">([</span><span class="n">train_data</span><span class="p">,</span> <span class="n">test_data</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">train_test_dataset</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">.</span><span class="nf">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># index 초기화
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>추가로 시도하였지만 제거했던 것</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 같은 유저가 같은 시험지, 문제를 풀었을 경우 최신 데이터만 남기고 이전 데이터를 제거하는 코드
</span><span class="n">train_test_dataset</span><span class="p">.</span><span class="nf">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">userID</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">assessmentItemID</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">testId</span><span class="sh">'</span><span class="p">],</span> <span class="n">keep</span><span class="o">=</span><span class="sh">'</span><span class="s">last</span><span class="sh">'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>    </div>

    <blockquote>
      <p>ML은 sequence데이터처리의 성능이 좋지 않을 것이라 예상을 하여 같은 문제를 푼적이 있다면 이전 데이터를 제거하는 방식으로 전처리를 하여 실험을 하였지만, 2526700 -&gt; 2476706로  1.98%의 데이터가 감소하였고, categorical 데이터로 처리 하였을 때 다양성이 줄어들어 성능이 떨어졌다</p>
    </blockquote>
  </li>
  <li>
    <p>result [train_test_dataset.info(show_counts=True)]</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 2526700 entries, 0 to 2526699
Data columns (total 6 columns):
 #   Column            Non-Null Count    Dtype 
---  ------            --------------    ----- 
 0   userID            2526700 non-null  int64 
 1   assessmentItemID  2526700 non-null  object
 2   testId            2526700 non-null  object
 3   answerCode        2526700 non-null  int64 
 4   Timestamp         2526700 non-null  object
 5   KnowledgeTag      2526700 non-null  int64 
dtypes: int64(3), object(3)
memory usage: 115.7+ MB
</code></pre></div>    </div>

    <blockquote>
      <p>결측치가 없는 것을 확인하고 결측치 처리과정 생략</p>
    </blockquote>
  </li>
</ul>

<h3 id="02_02-시험지-번호-문제-번호-대분류-카테고리-생성">02_02 시험지 번호, 문제 번호, 대분류 카테고리 생성</h3>

<hr />

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">assessmentItemID</code> ex_A080080003의 index=2 문자는 1-9 범위의 대분류이다</p>
</blockquote>

<ul>
  <li>
    <p>시험지 번호, 문제 번호 [사용 안함]</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">test_num</span><span class="sh">'</span><span class="p">]</span><span class="o">=</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">assessmentItemID</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">7</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">question_num</span><span class="sh">'</span><span class="p">]</span><span class="o">=</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">assessmentItemID</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">[</span><span class="mi">7</span><span class="p">:].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</code></pre></div>    </div>

    <blockquote>
      <p>시험지 번호와 문제 번호가 의존성이 있어 함께 사용되어야 문제를 구분할 수 있기 때문에 오용을 방지하기 위해 개인적으로  배제하고 실험</p>
    </blockquote>
  </li>
  <li>
    <p>대분류 카테고리</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">LargeCategory</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">assessmentItemID</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">LargeCategory</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">LargeCategory</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c1"># 정수화
</span></code></pre></div>    </div>

    <blockquote>
      <p>1 ~ 9 범위로 데이터의 개수에 비해 분류 가짓수가 작아 전처리 내에서는 사용하지 않고 모델링 실험에만 사용</p>
    </blockquote>
  </li>
</ul>

<h3 id="02_03-timestamp">02_03 TimeStamp</h3>

<hr />

<ul>
  <li>
    <p>base code</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">diff</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">userID</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">]].</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">userID</span><span class="sh">'</span><span class="p">).</span><span class="nf">diff</span><span class="p">().</span><span class="nf">fillna</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="nc">Timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">diff</span><span class="p">.</span><span class="nf">fillna</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="nc">Timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">diff</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">.</span><span class="nf">total_seconds</span><span class="p">())</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">elapsed</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">diff</span>
</code></pre></div>    </div>

    <blockquote>
      <p>- 코드 문제점<br />
1. 결측치가 생기게 되는 첫 번째 값은 0으로 다 채워서 첫번째 문제는 푼 시간이 0이 나오는 문제 발생<br />
  2. groupby를 <code class="language-plaintext highlighter-rouge">userID</code>로만 하면서 다음 시험지까지 시간차가 있는 경우에도 그대로 diff() 함수가 적용되어 오차 발생<br />
3. 문제 푸는 시간은 다음 문제로 넘어가는 시간을 기준으로 해야하는 데 diff()만 사용하면 해당 줄 기준으로 앞줄 시간을 빼서 한 칸씩 밀린다</p>
    </blockquote>
  </li>
  <li>
    <p>update code</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_datetime</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">])</span>
<span class="n">time_diff</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">userID</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">testId</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">]].</span><span class="nf">groupby</span><span class="p">([</span><span class="sh">'</span><span class="s">userID</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">testId</span><span class="sh">'</span><span class="p">]).</span><span class="nf">diff</span><span class="p">(</span><span class="n">periods</span><span class="o">=-</span><span class="mi">1</span><span class="p">).</span><span class="nf">abs</span><span class="p">()</span>
<span class="n">time_diff</span> <span class="o">=</span> <span class="n">time_diff</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">.</span><span class="nf">total_seconds</span><span class="p">())</span>
<span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_diff</span>
</code></pre></div>    </div>

    <blockquote>
      <p>- 해결 과정<br />
  1. nan결측치로 방치 -&gt; 추가로 전처리로 연결<br />
  2. groupby를 <code class="language-plaintext highlighter-rouge">userID</code>, <code class="language-plaintext highlighter-rouge">testId</code>를 기반으로 적용하여 유저아이디를 기반으로 시험지 아이디로 추가적으로 분리<br />
  3. .diff(periods=-1).abs()로 수정하여 앞에 값에 뒤에 값을 빼고 절대값으로 변경한다</p>
    </blockquote>
  </li>
  <li>
    <p>train_test_dataset [2526700 rows × 8 columns]</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: right"> </th>
          <th style="text-align: right">userID</th>
          <th style="text-align: left">assessmentItemID</th>
          <th style="text-align: left">testId</th>
          <th style="text-align: right">answerCode</th>
          <th style="text-align: left">Timestamp</th>
          <th style="text-align: right">KnowledgeTag</th>
          <th style="text-align: right">LargeCategory</th>
          <th style="text-align: right">TimeElapsed</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: right">0</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****1</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">7224</td>
          <td style="text-align: right">6</td>
          <td style="text-align: right">3</td>
        </tr>
        <tr>
          <td style="text-align: right">1</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****2</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">7225</td>
          <td style="text-align: right">6</td>
          <td style="text-align: right">8</td>
        </tr>
        <tr>
          <td style="text-align: right">2</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****3</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">7225</td>
          <td style="text-align: right">6</td>
          <td style="text-align: right">7</td>
        </tr>
        <tr>
          <td style="text-align: right">3</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">A****4</td>
          <td style="text-align: left">A05***1</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">****-**-** **:**:**</td>
          <td style="text-align: right">7225</td>
          <td style="text-align: right">6</td>
          <td style="text-align: right">7</td>
        </tr>
        <tr>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: left">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h3 id="02_04-timeelapsed-outlier-처리">02_04 TimeElapsed Outlier 처리</h3>

<hr />

<blockquote>
  <ul>
    <li>
      <p>주요 사항<br />
outlier를 처리하기 위해 앞뒤 값을 잘라내는 경우가 있다<br />
최소값은 0부터 시작하지만 문제를 찍는 다면 짧을 시간이 나올 수 있어, 유효한 값이다<br />
하지만 최대값의 경우에는 문제를 푸는 것에 비해서 정상범위를 벗어난 값들이 있어 상위 값들은 모델의 학습에 방해가 될 만한 값들이였다</p>
    </li>
    <li>
      <p>해결 방법<br />
사분위수 기준으로 outlier 값들을 nan으로 처리하여 결측치로 변환하였다</p>
    </li>
  </ul>
</blockquote>

<ul>
  <li>
    <p>train_test_dataset[‘TimeElapsed’].describe()</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>count    2119511.0000
mean       17075.7388
std       387221.2765
min            0.0000
25%           10.0000
50%           27.0000
75%           66.0000
max     28695878.0000
Name: TimeElapsed, dtype: float64
</code></pre></div>    </div>

    <blockquote>
      <p><code class="language-plaintext highlighter-rouge">TimeElapsed</code> 값은 0부터 28,695,878까지 다양하게 분포되어 있음을 알 수 있다.<br />
평균 경과 시간은 약 17,075.74이고, 표준 편차는 387,221.28로 상당히 큰 값이다.<br />
백분위수를 통해 대부분의 수치들은 상대적으로 짧은 경과 시간을 갖는 반면, 최댓값을 기록하는 일부 관측값은 훨씬 더 긴 경과 시간을 갖고 있음을 알 수 있다.</p>
    </blockquote>
  </li>
  <li>
    <p>전처리 전 scatter 그래프</p>

    <p><img src="../../images/Boostcamp_AI/2023-05-17-DKT_EDA/image-20230526012619315.png" alt="image-20230526012619315" /></p>
  </li>
  <li>
    <p>사분위수 기준 Outlier 제거 함수 코드</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 이상치 처리 함수
</span><span class="k">def</span> <span class="nf">_handle_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="c1"># 사분위수 계산
</span>    <span class="n">q1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">].</span><span class="nf">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">q2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">].</span><span class="nf">quantile</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># 추가: 중위값 - 사용은 안함
</span>    <span class="n">q3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">].</span><span class="nf">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
    <span class="c1"># IQR 계산
</span>    <span class="n">iqr</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">-</span> <span class="n">q1</span>
    <span class="c1"># 상위 이상치 처리
</span>    <span class="n">upper_bound</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">iqr</span>
    <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">nan</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">upper_bound</span> <span class="k">else</span> <span class="n">x</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">q1: </span><span class="si">{</span><span class="n">q1</span><span class="si">}</span><span class="s">, q2: </span><span class="si">{</span><span class="n">q2</span><span class="si">}</span><span class="s">, q3: </span><span class="si">{</span><span class="n">q3</span><span class="si">}</span><span class="s">, iqr: </span><span class="si">{</span><span class="n">iqr</span><span class="si">}</span><span class="s">, upper_bound: </span><span class="si">{</span><span class="n">upper_bound</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
  
<span class="n">train_test_dataset</span> <span class="o">=</span> <span class="nf">_handle_outliers</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div>    </div>

    <blockquote>
      <p>- output -<br />
q1: 10.0, q2: 27.0, q3: 66.0, iqr: 56.0, upper_bound: 150.0</p>
    </blockquote>
  </li>
  <li>
    <p>신뢰구간 95% 함수 코드</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">scipy.stats</span> <span class="kn">import</span> <span class="n">t</span>
<span class="k">def</span> <span class="nf">_calculate_confidence_interval</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">target_column</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">confidence_level</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
    <span class="c1"># 평균과 표준편차 계산
</span>    <span class="n">mean</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">].</span><span class="nf">mean</span><span class="p">()</span>
    <span class="n">std</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">].</span><span class="nf">std</span><span class="p">()</span>
  
    <span class="c1"># 데이터 개수와 신뢰수준 설정
</span>    <span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
  
    <span class="c1"># 신뢰구간 계산
</span>    <span class="n">t_critical</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="nf">ppf</span><span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">confidence_level</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">margin_of_error</span> <span class="o">=</span> <span class="n">t_critical</span> <span class="o">*</span> <span class="n">std</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">confidence_interval</span> <span class="o">=</span> <span class="p">(</span><span class="n">mean</span> <span class="o">-</span> <span class="n">margin_of_error</span><span class="p">,</span> <span class="n">mean</span> <span class="o">+</span> <span class="n">margin_of_error</span><span class="p">)</span>
  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Mean:</span><span class="sh">"</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Standard Deviation:</span><span class="sh">"</span><span class="p">,</span> <span class="n">std</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Confidence Interval ({}%):</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">confidence_level</span> <span class="o">*</span> <span class="mi">100</span><span class="p">),</span> <span class="n">confidence_interval</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">confidence_interval</span>
    
<span class="n">confidence_interval</span> <span class="o">=</span> <span class="nf">_calculate_confidence_interval</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">)</span>
</code></pre></div>    </div>

    <blockquote>
      <p>- output -<br />
Mean: 34.22725368509248<br />
Standard Deviation: 33.77893776146775<br />
Confidence Interval (95.0%): (34.185603450952044, 34.26890391923291)</p>
    </blockquote>
  </li>
  <li>
    <p>outlier 제거 후 scatter 그래프 [유저아이디 / 시간]</p>

    <p><img src="../../images/Boostcamp_AI/2023-05-17-DKT_EDA/image-20230526013344075.png" alt="image-20230526013344075" /></p>
  </li>
  <li>
    <p>outlier 제거 후 hist 그래프 [시간 / 빈도]</p>

    <p><img src="../../images/Boostcamp_AI/2023-05-17-DKT_EDA/image-20230526013625294.png" alt="image-20230526013625294" /></p>
  </li>
</ul>

<h3 id="02_05-timeelapsed-결측치-채우기">02_05 TimeElapsed 결측치 채우기</h3>

<hr />

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">userID</code>,	<code class="language-plaintext highlighter-rouge">assessmentItemID</code>,	<code class="language-plaintext highlighter-rouge">testId</code>, <code class="language-plaintext highlighter-rouge">KnowledgeTag</code>, <code class="language-plaintext highlighter-rouge">LargeCategory</code>를 기준으로 각 피처당 <code class="language-plaintext highlighter-rouge">TimeElapsed</code> 평균 값으로 새 피처 생성</p>
</blockquote>

<ul>
  <li>
    <p>nan을 채우기 위한 전과정</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_fill_nan_process</span><span class="p">(</span><span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">columns_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">columns_list</span><span class="p">:</span>
        <span class="n">create_column_name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="sh">'</span><span class="s">_time_average</span><span class="sh">'</span>
        <span class="n">time_average</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="n">name</span><span class="p">)[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">()</span>
        <span class="n">dataset</span><span class="p">[</span><span class="n">create_column_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[</span><span class="n">name</span><span class="p">].</span><span class="nf">map</span><span class="p">(</span><span class="n">time_average</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dataset</span>
  
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">userID</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">assessmentItemID</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">testId</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">KnowledgeTag</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">LargeCategory</span><span class="sh">'</span><span class="p">]</span>
<span class="n">train_test_dataset</span> <span class="o">=</span> <span class="nf">_fill_nan_process</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span>
</code></pre></div>    </div>

    <blockquote>
      <p>columns당 같은 값을 가진 group의 시간 평균을 추가 해주는 함수</p>
    </blockquote>

    <table>
      <thead>
        <tr>
          <th style="text-align: right"> </th>
          <th>…</th>
          <th style="text-align: right">TimeElapsed</th>
          <th style="text-align: right">userID_time_average</th>
          <th style="text-align: right">assessmentItemID_time_average</th>
          <th style="text-align: right">testId_time_average</th>
          <th style="text-align: right">KnowledgeTag_time_average</th>
          <th style="text-align: right">LargeCategory_time_average</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: right">0</td>
          <td>…</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">30.5714</td>
          <td style="text-align: right">10.587</td>
          <td style="text-align: right">17.9805</td>
          <td style="text-align: right">12.4831</td>
          <td style="text-align: right">37.1284</td>
        </tr>
        <tr>
          <td style="text-align: right">1</td>
          <td>…</td>
          <td style="text-align: right">8</td>
          <td style="text-align: right">30.5714</td>
          <td style="text-align: right">19.8776</td>
          <td style="text-align: right">17.9805</td>
          <td style="text-align: right">22.2376</td>
          <td style="text-align: right">37.1284</td>
        </tr>
        <tr>
          <td style="text-align: right">2</td>
          <td>…</td>
          <td style="text-align: right">7</td>
          <td style="text-align: right">30.5714</td>
          <td style="text-align: right">17.6694</td>
          <td style="text-align: right">17.9805</td>
          <td style="text-align: right">22.2376</td>
          <td style="text-align: right">37.1284</td>
        </tr>
        <tr>
          <td style="text-align: right">3</td>
          <td>…</td>
          <td style="text-align: right">7</td>
          <td style="text-align: right">30.5714</td>
          <td style="text-align: right">14.065</td>
          <td style="text-align: right">17.9805</td>
          <td style="text-align: right">22.2376</td>
          <td style="text-align: right">37.1284</td>
        </tr>
        <tr>
          <td style="text-align: right">4</td>
          <td>…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
          <td style="text-align: right">…</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>결측치 확인</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
TimeElapsed                      626612
userID_time_average                   0
assessmentItemID_time_average      7050
testId_time_average                   0
KnowledgeTag_time_average             0
LargeCategory_time_average            0
dtype: int64
</code></pre></div>    </div>

    <blockquote>
      <p>assessmentItemID에서 마지막 문제인 경우에는 풀이 시간을 알수 없어 assessmentItemID_time_average에서 NaN값이 생성됨</p>
    </blockquote>
  </li>
  <li>
    <p>결측치 처리 함수 코드 [선형회귀 모델 사용]</p>

    <blockquote>
      <p>먼저 <code class="language-plaintext highlighter-rouge">assessmentItemID_time_average</code>의 결측치를 치운 후 <code class="language-plaintext highlighter-rouge">ItemID_time_average</code>의 값을 함께 포함한 평균으로 <code class="language-plaintext highlighter-rouge">TimeElapsed</code>를 채운다<br />
결측치가 없는 행과 변수들을 활용하여 회귀 모델 피팅<br />
NaN값이 존재하는 행을 제거한 다음 학습을 진행한 다음 NaN값이 있는 행들을 model.predict를 통해 예측하여 결측치를 채운다</p>
    </blockquote>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="k">def</span> <span class="nf">_predict_missing_with_regression</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">target_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">
    결측치가 있는 변수를 선형 회귀 모델을 사용하여 예측
    Args:
        df (pd.DataFrame): 결측치를 예측할 데이터프레임
        target_column (str): 예측 대상 변수 이름
    Returns:
        pd.DataFrame: 결측치가 채워진 변수 열
    </span><span class="sh">"""</span>
    <span class="c1"># 결측치가 없는 행과 변수들을 활용하여 회귀 모델 피팅
</span>    <span class="n">train_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">dropna</span><span class="p">()</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">target_column</span><span class="p">])</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span>
    <span class="n">model</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">()</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
      
    <span class="c1"># 결측치를 예측하기 위해 회귀 모델을 활용
</span>    <span class="n">missing_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">].</span><span class="nf">isnull</span><span class="p">()].</span><span class="nf">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">target_column</span><span class="p">])</span>
    <span class="n">predicted_values</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">predict</span><span class="p">(</span><span class="n">missing_data</span><span class="p">)</span>
      
    <span class="c1"># 예측된 값으로 결측치 채우기
</span>    <span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">].</span><span class="nf">isnull</span><span class="p">(),</span> <span class="n">target_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">predicted_values</span>
      
    <span class="c1"># 0 미만의 값들을 0으로 처리
</span>    <span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">target_column</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span>
    
<span class="c1"># 결측치 예측 및 채우기
</span><span class="n">df</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[[</span><span class="sh">'</span><span class="s">userID_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">assessmentItemID_time_average</span><span class="sh">'</span><span class="p">,</span>
                         <span class="sh">'</span><span class="s">testId_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">KnowledgeTag_time_average</span><span class="sh">'</span><span class="p">,</span>
                         <span class="sh">'</span><span class="s">LargeCategory_time_average</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">assessmentItemID_time_average</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="nf">_predict_missing_with_regression</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="sh">'</span><span class="s">assessmentItemID_time_average</span><span class="sh">'</span><span class="p">)</span>
  
<span class="n">df</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">userID_time_average</span><span class="sh">'</span><span class="p">,</span>
                         <span class="sh">'</span><span class="s">assessmentItemID_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">testId_time_average</span><span class="sh">'</span><span class="p">,</span>
                         <span class="sh">'</span><span class="s">KnowledgeTag_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">LargeCategory_time_average</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="nf">_predict_missing_with_regression</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">).</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</code></pre></div>    </div>

    <blockquote>
      <p>먼저 <code class="language-plaintext highlighter-rouge">assessmentItemID_time_average</code>의 결측치를 채우고 <code class="language-plaintext highlighter-rouge">TimeElapsed</code>를 채운다</p>
    </blockquote>
  </li>
  <li>
    <p>결측치 처리 완료</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># TimeElapsed 정수화
</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="c1"># 계산이 끝난 columns 제거
</span><span class="n">train_test_dataset</span><span class="p">.</span><span class="nf">drop</span><span class="p">([</span><span class="sh">'</span><span class="s">userID_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">assessmentItemID_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">testId_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">KnowledgeTag_time_average</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">LargeCategory_time_average</span><span class="sh">'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">train_test_dataset</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>TimeElapsed_category 생성</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 10을 기준으로 카테로리 생성 [0 ~ 15] 범위
</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed_category</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed</span><span class="sh">'</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
<span class="nf">sorted</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">TimeElapsed_category</span><span class="sh">'</span><span class="p">].</span><span class="nf">unique</span><span class="p">())</span>
</code></pre></div>    </div>

    <blockquote>
      <p>- output -
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]</p>
    </blockquote>
  </li>
  <li>
    <p>결측치 처리 완료 후 hist 그래프 [시간 / 빈도]</p>

    <p><img src="../../images/Boostcamp_AI/2023-05-17-DKT_EDA/image-20230526022215108.png" alt="image-20230526022215108" /></p>

    <blockquote>
      <p>- output -
Mean: 34.22725368509248 -&gt; 33.83793445996755<br />
Standard Deviation: 33.77893776146775 -&gt; 30.874327640807945<br />
Confidence Interval (95.0%): (34.185603450952044, 34.26890391923291) -&gt; (33.79986567923061, 33.87600324070449)</p>
    </blockquote>
  </li>
  <li>
    <p>Timestamp 결측치 처리 완료</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: left"> </th>
          <th style="text-align: right">userID</th>
          <th style="text-align: right">answerCode</th>
          <th style="text-align: left">Timestamp</th>
          <th style="text-align: right">KnowledgeTag</th>
          <th style="text-align: right">LargeCategory</th>
          <th style="text-align: right">TimeElapsed</th>
          <th style="text-align: right">TimeElapsed_category</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">count</td>
          <td style="text-align: right">2.5267e+06</td>
          <td style="text-align: right">2.5267e+06</td>
          <td style="text-align: left">2526700</td>
          <td style="text-align: right">2.5267e+06</td>
          <td style="text-align: right">2.5267e+06</td>
          <td style="text-align: right">2.5267e+06</td>
          <td style="text-align: right">2.5267e+06</td>
        </tr>
        <tr>
          <td style="text-align: left">mean</td>
          <td style="text-align: right">2083.08</td>
          <td style="text-align: right">0.654151</td>
          <td style="text-align: left">2020-07-18 15:59:12.793359104</td>
          <td style="text-align: right">4909.09</td>
          <td style="text-align: right">4.70513</td>
          <td style="text-align: right">33.8379</td>
          <td style="text-align: right">2.96018</td>
        </tr>
        <tr>
          <td style="text-align: left">min</td>
          <td style="text-align: right">0</td>
          <td style="text-align: right">-1</td>
          <td style="text-align: left">2019-12-31 15:08:01</td>
          <td style="text-align: right">23</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">0</td>
          <td style="text-align: right">0</td>
        </tr>
        <tr>
          <td style="text-align: left">25%</td>
          <td style="text-align: right">800</td>
          <td style="text-align: right">0</td>
          <td style="text-align: left">2020-05-19 05:24:21.750000128</td>
          <td style="text-align: right">1934</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">11</td>
          <td style="text-align: right">1</td>
        </tr>
        <tr>
          <td style="text-align: left">50%</td>
          <td style="text-align: right">1748</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">2020-07-30 07:12:41</td>
          <td style="text-align: right">5258</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">26</td>
          <td style="text-align: right">2</td>
        </tr>
        <tr>
          <td style="text-align: left">75%</td>
          <td style="text-align: right">3034</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">2020-09-21 11:48:52</td>
          <td style="text-align: right">7913</td>
          <td style="text-align: right">7</td>
          <td style="text-align: right">47</td>
          <td style="text-align: right">4</td>
        </tr>
        <tr>
          <td style="text-align: left">max</td>
          <td style="text-align: right">7441</td>
          <td style="text-align: right">1</td>
          <td style="text-align: left">2020-12-29 16:46:21</td>
          <td style="text-align: right">11271</td>
          <td style="text-align: right">9</td>
          <td style="text-align: right">150</td>
          <td style="text-align: right">15</td>
        </tr>
        <tr>
          <td style="text-align: left">std</td>
          <td style="text-align: right">1585.56</td>
          <td style="text-align: right">0.476263</td>
          <td style="text-align: left">nan</td>
          <td style="text-align: right">3303</td>
          <td style="text-align: right">2.43182</td>
          <td style="text-align: right">30.8743</td>
          <td style="text-align: right">3.07131</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h2 id="03_-featureengineering">03_ FeatureEngineering</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">answerCode</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">answerCode</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">train_test_dataset</span><span class="p">[</span><span class="sh">'</span><span class="s">answerCode</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<blockquote>
  <p>먼저 answerCode의 -1을 nan으로 처리하여 함께 평균에 포함되어 연산되지 않도록 한다</p>
</blockquote>

<h3 id="03_01-timestamp">03_01 Timestamp</h3>

<hr />

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_datetime_process</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">):</span>
    <span class="c1"># 년도 (Year) 추출
</span>    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">year</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">year</span>
    <span class="c1"># 월 (Month) 추출
</span>    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">month</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">month</span>
    <span class="c1"># 일 (Day) 추출
</span>    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">day</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">day</span>
    <span class="c1"># 요일 (Weekday) 추출 - [0~6] 월 ~ 일
</span>    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weekday</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">weekday</span>
    <span class="c1"># 시간 (hour) 추출
</span>    <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">hour</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">Timestamp</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">hour</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="n">train_test_dataset</span> <span class="o">=</span> <span class="nf">_datetime_process</span><span class="p">(</span><span class="n">train_test_dataset</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">Timestamp</code> 값들을 세분화한다</p>
</blockquote>

<h2 id="04_-실패-했던-featureengineering">04_ 실패 했던 FeatureEngineering</h2>

<blockquote>
  <p>FeatureEngineering에서 예측 모델 학습에서 auc나 accuracy를 1에 가깝게 과적합을 발생시킨 feature들입니다<br />
전 book recommend 대회에서는 예측 모델의 성능 향상을 이루어낸 FeatureEngineering 방식이 였지만 이번에는 [0,1]로 이루어진 분류 문제여서 정답을 기반으로 다른 feature들을 결합하는 순간 새로 생성된 feature들이 정답을 너무 잘 표현한 값들이여서 과적합을 발생시켰습니다</p>
</blockquote>

<h3 id="04_01-_columns_to_mean_score-함수-코드">04_01 _columns_to_mean_score 함수 코드</h3>

<hr />

<blockquote>
  <p>_columns_to_mean_score(df: 데이터프레임, columns_list: 리스트) -&gt; 데이터프레임:</p>
  <ul>
    <li>columns_list 규칙 - *_mean<br />
 userID_mean - 같은 유저 아이디별 평균 점수<br />
 userID_assessmentItemID_mean - 같은 유저의 같은 문제 평균 점수<br />
 userID_testId_mean - 같은 유저의 같은 시험지 평균 점수</li>
  </ul>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_columns_to_mean_score</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">columns_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="n">create_column_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">_</span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">columns_list</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="s">_mean</span><span class="sh">'</span>
    <span class="c1"># DataFrame을 columns_list로 그룹화한 후, answerCode 열의 평균을 계산하여 새로운 DataFrame average_data를 생성
</span>    <span class="n">average_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="n">columns_list</span><span class="p">)[</span><span class="sh">'</span><span class="s">answerCode</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">()</span>
    <span class="c1"># average_data DataFrame의 answerCode 열의 이름을 create_column_name으로 변경
</span>    <span class="n">average_data</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">answerCode</span><span class="sh">'</span><span class="p">:</span> <span class="n">create_column_name</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># 평균치라서 결측치는 0.5로 채움
</span>    <span class="n">average_data</span> <span class="o">=</span> <span class="n">average_data</span><span class="p">.</span><span class="nf">fillna</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    
    <span class="c1"># df와 average_data를 columns_list를 기준으로 left 조인하여 병합
</span>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">average_data</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="n">columns_list</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">left</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></div>

<blockquote>
  <p>userID, assessmentItemID, testId, KnowledgeTag, LargeCategory, TimeElapsed_category, weekday,	hour 활용하여 feature들을 생성</p>
</blockquote>

<h2 id="05_-전처리-완료">05_ 전처리 완료</h2>

<blockquote>
  <p>개인 전처리를 완료하고 이후에는 팀원들의 전처리를 추가적으로 합쳐 하나의 데이터셋을 만들고 hugging face datasets를 사용하여 버전관리를 했습니다</p>
</blockquote>

<p><img src="../../images/Boostcamp_AI/2023-05-17-DKT_EDA/image-20230526025057538.png" alt="image-20230526025057538" /></p>

<p><img src="../../images/Boostcamp_AI/2023-05-17-DKT_EDA/image-20230526024903779.png" alt="image-20230526024903779" /></p>

<h1 id="--회고">- 회고</h1>

<hr />

<ul>
  <li>
    <p>목표</p>

    <blockquote>
      <p>이전의 대회인 book recommend 대회에서는 각자 eda를 하고 예측 모델 생성을 하였기 때문에 같은 모델과 파라미더를 사용해도 결과가 다르게 나오는 시행착오를 겪어 이번에는 공통된 데이터셋을 구성하는 것을 목표로 하였습니다</p>
    </blockquote>
  </li>
  <li>
    <p>시도한 개선 방식</p>

    <blockquote>
      <p>04_01의 _columns_to_mean_score방식을 구현 하였을 때 전에는 dict로 key:value를 통해서 연산하는 방식을 사용하여 속도가 느렸는데 pandas에 더 익숙해지면서 groupby()등 여러 개념을 활용하여 같은 데이터 처리 시간을 단축시켰습니다<br />
결측치를 처리하는 과정에서 그래프를 보고 임의로 잘라내는 방식을 사용하였는데 이번에는 사분위수를 적용하여 통계학적으로 접근을 하였습니다<br />
추가로 결측치를 처리할 때 평균으로 처리를 하였지만 의존성이 있는 feature들을 생성하여 LinearRegression 모델을 활용하여 채웠습니다</p>
    </blockquote>
  </li>
  <li>
    <p>학습 과정에서의 교훈</p>

    <blockquote>
      <p>이전에 좋은 결과를 얻었다고 같은 전처리가 항상 좋은 결과를 보장하는 것이 아니라는 점을 배울 수 있었고, 데이터셋의 구조를 파악하고 데이터셋에 맞는 전처리가 필요하다는 것을 배울 수 있었습니다. 다양한 데이터를 접하고 직접 전처리를 하는 것이 실력을 향상 시키는 방법이라는 생각이 들었습니다</p>
    </blockquote>
  </li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#project" class="page__taxonomy-item p-category" rel="tag">Project</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#boostcamp-ai" class="page__taxonomy-item p-category" rel="tag">BoostCamp_AI</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time class="dt-published" datetime="2023-05-17T00:00:00+09:00">2023-05-17 Wednesday</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%5BProject%5D+DKT+%EB%8C%80%ED%9A%8C+-+EDA%20https%3A%2F%2Fbrothergyu.github.io%2Fboostcamp_ai%2FDKT_EDA%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbrothergyu.github.io%2Fboostcamp_ai%2FDKT_EDA%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbrothergyu.github.io%2Fboostcamp_ai%2FDKT_EDA%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      <!-- 
  <nav class="pagination">
    
      <a href="/boostcamp_ai/Books_Recommendation_Platform/" class="pagination--pager" title="[Project] Books_Recommendation_Platform
">이전</a>
    
    
      <a href="/boostcamp_ai/DKT_Modeling/" class="pagination--pager" title="[Project] DKT 대회 - Modeling
">다음</a>
    
  </nav>
 -->




  

  

  

  

  

  
  	
  	
  	
  	
  	


  <nav class="pagination_prev_next">
    
      <a href="/boostcamp_ai/Books_Recommendation_Platform/" class="pagination_prev_next--pager_left"><span class="prev_next">이전 포스트<br></span>[Project] Books_Recommendation_Platform</a>
    
    
    
      <a href="/boostcamp_ai/DKT_Modeling/" class="pagination_prev_next--pager_right"><span class="prev_next">다음 포스트<br></span>[Project] DKT 대회 - Modeling</a>
    
    
  </nav>


    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">댓글남기기</h4>
      <section id="utterances-comments"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">최근 포스트</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ubuntu_server/cuda_install/" rel="permalink">[Setting] cuda/cudnn 설치하기
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-08-25T00:00:00+09:00">2023-08-25 Friday</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">cuda 설치하기
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ubuntu_server/userful_util/" rel="permalink">[Util] 알면 편한 유틸리티들
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-08-24T00:00:00+09:00">2023-08-24 Thursday</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">알면 편한 유틸리티들
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/etc/ram_overclock/" rel="permalink">[Desktop Setting] Ram Overclock
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-08-24T00:00:00+09:00">2023-08-24 Thursday</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">램 오버클럭 수치 기록
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ai/cosine_similarity/" rel="permalink">[sklearn] cosine_similarity
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-08-24T00:00:00+09:00">2023-08-24 Thursday</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">[sklearn] cosine_similarity
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="검색어를 입력하세요..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    
    
    <aside class="sidebar__top">
      <a href="#site-nav"> <i class="fas fa-angle-up fa-2x"></i></a>
    </aside>
    
      <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
          <li><a href="mailto:brothergyu98@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://github.com/BrotherGyu/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 Brother_Gyu. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDHERKJ7W3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BDHERKJ7W3', { 'anonymize_ip': false});
</script>






    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'BrotherGyu/BrotherGyu.github.io_comments');
    script.setAttribute('issue-term', 'pathname');
    
    script.setAttribute('theme', 'github-light');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  




    <script type="text/javascript">
    window.MathJax = {
   tex: {
     packages: ['base', 'ams']
   },
   loader: {
     load: ['ui/menu', '[tex]/ams']
   },
   startup: {
     ready() {
       MathJax.startup.defaultReady();
       const Macro = MathJax._.input.tex.Symbol.Macro;
       const MapHandler = MathJax._.input.tex.MapHandler.MapHandler;
       const Array = MathJax._.input.tex.ams.AmsMethods.default.Array;
       const env = new Macro('psmallmatrix', Array, [null, '(', ')', 'c', '.333em', '.2em', 'S', 1]);
       MapHandler.getMap('AMSmath-environment').add('psmallmatrix', env);
     }
   }
    };
    </script>
    <script type="text/javascript" id="MathJax-script" async
   src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
    </script>
  </body>
</html>
